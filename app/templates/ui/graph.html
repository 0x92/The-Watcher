{% extends 'base.html' %}
{% block content %}
<header>
  <h1>Relationship Graph Explorer</h1>
</header>
<form id="graph-filters" class="filter-grid" autocomplete="off">
  <div class="form-control">
    <label for="graph-window">Zeitraum</label>
    <select id="graph-window" name="window">
      <option value="1h">1 Stunde</option>
      <option value="6h">6 Stunden</option>
      <option value="24h" selected>24 Stunden</option>
      <option value="7d">7 Tage</option>
      <option value="30d">30 Tage</option>
      <option value="all">Alles</option>
    </select>
  </div>

  <div class="form-control">
    <label for="graph-limit">Limit pro Kategorie</label>
    <input id="graph-limit" name="limit" type="number" min="5" max="200" value="50">
  </div>

  <fieldset class="roles form-control">
    <legend>Knoten-Typen</legend>
    <label><input type="checkbox" name="role" value="source" checked> Quellen</label>
    <label><input type="checkbox" name="role" value="tag" checked> Tags</label>
    <label><input type="checkbox" name="role" value="alert" checked> Alerts</label>
  </fieldset>

  <div class="form-control">
    <label for="graph-refresh">Auto-Refresh</label>
    <select id="graph-refresh" name="refresh">
      <option value="0">Aus</option>
      <option value="30">30 Sekunden</option>
      <option value="60" selected>60 Sekunden</option>
      <option value="120">120 Sekunden</option>
    </select>
  </div>

  <button type="button" id="graph-reload" class="button-primary">Aktualisieren</button>
</form>

<div id="graph-container">
  <div id="graph" role="presentation" aria-label="Graph"></div>
  <aside class="graph-sidebar">
    <div class="graph-panel">
      <h2>Legende</h2>
      <ul class="graph-legend">
        <li><span class="legend-swatch" style="background:#2563eb"></span> Quellen</li>
        <li><span class="legend-swatch" style="background:#22c55e"></span> Tags</li>
        <li><span class="legend-swatch" style="background:#f97316"></span> Alerts</li>
      </ul>
    </div>
    <div class="graph-panel" id="graph-summary">
      <h2>Zusammenfassung</h2>
      <p class="status-message" data-state="idle">Bereit.</p>
      <div class="graph-stats"></div>
    </div>
    <div class="graph-panel">
      <h2>Aktionen</h2>
      <div class="graph-actions">
        <button type="button" id="graph-export-png">Export PNG</button>
        <button type="button" id="graph-export-json">Export JSON</button>
      </div>
    </div>
  </aside>
</div>
{% endblock %}
